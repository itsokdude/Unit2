<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 2: Homes & Families</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel f√ºr JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap');
        
        .font-hand { font-family: 'Patrick Hand', cursive; }
        .font-heading { font-family: 'Fredoka', sans-serif; }
        
        .animate-pop { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        .animate-slide-in { animation: slideIn 0.5s ease-out forwards; }
        
        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            80% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); }
        }

        @keyframes slideIn {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .roof {
            background-color: #e67e22;
            background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, #d35400 10px, #d35400 12px);
        }

        .wood-pattern {
            background-color: #8d6e63;
            background-image: repeating-linear-gradient(90deg, transparent, transparent 20px, #795548 20px, #795548 22px);
        }

        .cork-board {
            background-color: #d7ccc8;
            background-image: radial-gradient(#a1887f 1px, transparent 1px);
            background-size: 20px 20px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }
        
        /* Remove arrows from number input */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICON COMPONENTS (Inline replacement for Lucide) ---
        const ArrowLeft = ({ size = 24, className }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
        );
        const ArrowRight = ({ size = 24, className }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        );
        const Play = ({ size = 24, className, fill="none" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="5 3 19 12 5 21 5 3"/></svg>
        );
        const Pause = ({ size = 24, className, fill="none" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
        );
        const RotateCcw = ({ size = 24, className }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
        );
        const Check = ({ size = 24, strokeWidth = 2, className }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="20 6 9 17 4 12"/></svg>
        );
        const Home = ({ size = 24, color, className }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color || "currentColor"} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        );
        const Plus = ({ size = 24, strokeWidth = 2, className }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        );
        const X = ({ size = 24, className }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        );
        const Clock = ({ size = 24, className }) => (
             <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        );

        // --- CUSTOM ILLUSTRATIONS ---

        const DoodleHourglass = ({ timeLeft, totalTime, isActive }) => {
            const fraction = Math.max(0, Math.min(1, timeLeft / totalTime));
            return (
            <svg viewBox="0 0 100 140" className="drop-shadow-sm w-full h-full">
                <path d="M20 10 L80 10 L60 70 L80 130 L20 130 L40 70 L20 10 Z" fill="#E0F7FA" stroke="#4FC3F7" strokeWidth="3" />
                <rect x="10" y="0" width="80" height="10" rx="2" fill="#8D6E63" stroke="#5D4037" strokeWidth="2" />
                <rect x="10" y="130" width="80" height="10" rx="2" fill="#8D6E63" stroke="#5D4037" strokeWidth="2" />
                <path d={`M25 15 L75 15 L${60 - (20 * (1-fraction))} ${70 - (55 * (1-fraction))} L${40 + (20 * (1-fraction))} ${70 - (55 * (1-fraction))} Z`} fill="#FFB74D" />
                <path d={`M25 125 L75 125 L${60 + (15 * (1-fraction))} ${125 - (55 * (1-fraction))} L${40 - (15 * (1-fraction))} ${125 - (55 * (1-fraction))} Z`} fill="#FFB74D" />
                {isActive && timeLeft > 0 && <line x1="50" y1="70" x2="50" y2="125" stroke="#FFB74D" strokeWidth="3" strokeDasharray="5,3" className="animate-pulse"/>}
            </svg>
            );
        };

        const IlluLivingRoom = () => (
            <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-sm">
                <circle cx="50" cy="50" r="45" fill="#C8E6C9" />
                <rect x="25" y="45" width="50" height="30" rx="5" fill="#ef5350" stroke="#b71c1c" strokeWidth="2"/>
                <rect x="20" y="35" width="15" height="40" rx="3" fill="#e57373" stroke="#b71c1c" strokeWidth="2"/>
                <rect x="65" y="35" width="15" height="40" rx="3" fill="#e57373" stroke="#b71c1c" strokeWidth="2"/>
                <path d="M25 15 L75 15 L75 25 L50 20 L25 25 Z" fill="#FFD54F" />
            </svg>
        );
        const IlluBedroom = () => (
            <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-sm">
                <circle cx="50" cy="50" r="45" fill="#E1BEE7" />
                <rect x="20" y="30" width="60" height="50" rx="2" fill="#AB47BC" stroke="#7B1FA2" strokeWidth="2"/>
                <rect x="20" y="30" width="60" height="15" fill="#F3E5F5" />
                <rect x="30" y="25" width="40" height="15" rx="5" fill="#fff" stroke="#ddd" strokeWidth="1"/>
            </svg>
        );
        const IlluKitchen = () => (
            <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-sm">
                <circle cx="50" cy="50" r="45" fill="#FFF9C4" />
                <path d="M30 70 L70 70 L75 30 L25 30 Z" fill="#BDBDBD" stroke="#616161" strokeWidth="2"/>
                <rect x="20" y="30" width="60" height="10" rx="2" fill="#EF5350" />
                <path d="M40 30 Q50 10 60 30" fill="none" stroke="#ddd" strokeWidth="3" />
            </svg>
        );
        const IlluBathroom = () => (
            <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-sm">
                <circle cx="50" cy="50" r="45" fill="#B3E5FC" />
                <path d="M20 40 L80 40 L75 80 L25 80 Z" fill="#fff" stroke="#0288D1" strokeWidth="2"/>
                <circle cx="35" cy="30" r="5" fill="#E1F5FE" className="animate-bounce" style={{animationDelay: '0s'}}/>
                <circle cx="55" cy="20" r="4" fill="#E1F5FE" className="animate-bounce" style={{animationDelay: '0.5s'}}/>
            </svg>
        );
        const IlluDining = () => (
            <svg viewBox="0 0 100 100" className="w-full h-full drop-shadow-sm">
                <circle cx="50" cy="50" r="45" fill="#FFCCBC" />
                <circle cx="50" cy="50" r="25" fill="#fff" stroke="#ddd" strokeWidth="2"/>
                <rect x="15" y="45" width="10" height="30" fill="#B0BEC5" rx="2"/>
                <path d="M15 45 L15 25 L18 25 L18 45 M22 45 L22 25 L25 25 L25 45" stroke="#B0BEC5" strokeWidth="2"/>
                <rect x="75" y="25" width="10" height="50" rx="2" fill="#B0BEC5"/>
            </svg>
        );

        const DoodleSofa = () => (
            <svg viewBox="0 0 120 80" className="w-full h-full filter drop-shadow-lg">
                <path d="M10 30 Q10 10 30 10 L90 10 Q110 10 110 30 L110 70 Q110 75 105 75 L15 75 Q10 75 10 70 Z" fill="#D32F2F" stroke="#B71C1C" strokeWidth="2" />
                <rect x="25" y="40" width="35" height="30" rx="2" fill="#E57373" stroke="#B71C1C" strokeWidth="1" />
                <rect x="60" y="40" width="35" height="30" rx="2" fill="#E57373" stroke="#B71C1C" strokeWidth="1" />
                <path d="M0 40 Q0 25 15 25 L25 25 L25 60 L15 60 Q0 60 0 40 Z" fill="#C62828" stroke="#B71C1C" strokeWidth="2" />
                <path d="M120 40 Q120 25 105 25 L95 25 L95 60 L105 60 Q120 60 120 40 Z" fill="#C62828" stroke="#B71C1C" strokeWidth="2" />
                <rect x="10" y="75" width="10" height="5" fill="#5D4037" />
                <rect x="100" y="75" width="10" height="5" fill="#5D4037" />
            </svg>
        );

        const DoodleTV = () => (
            <svg viewBox="0 0 100 80" className="w-full h-full filter drop-shadow-md">
                <rect x="5" y="5" width="90" height="60" rx="3" fill="#212121" stroke="#424242" strokeWidth="2"/>
                <rect x="10" y="10" width="80" height="50" fill="#424242" />
                <path d="M10 60 L20 20 L30 60" fill="rgba(255,255,255,0.1)"/>
                <path d="M50 65 L40 75 L60 75 Z" fill="#212121"/>
                <rect x="30" y="75" width="40" height="5" rx="2" fill="#212121"/>
            </svg>
        );

        const DoodleWindow = () => (
            <svg viewBox="0 0 80 80" className="w-full h-full filter drop-shadow-md">
                <rect x="5" y="5" width="70" height="70" fill="#B3E5FC" stroke="#5D4037" strokeWidth="3"/>
                <rect x="38" y="5" width="4" height="70" fill="#5D4037"/>
                <rect x="5" y="38" width="70" height="4" fill="#5D4037"/>
                <path d="M10 65 L25 50" stroke="white" strokeWidth="2" opacity="0.5"/>
                <path d="M50 20 L65 10" stroke="white" strokeWidth="2" opacity="0.5"/>
            </svg>
        );

        const DoodleShelf = () => (
            <svg viewBox="0 0 100 100" className="w-full h-full filter drop-shadow-md">
                <rect x="5" y="10" width="90" height="8" rx="1" fill="#8D6E63" stroke="#5D4037" strokeWidth="1"/>
                <rect x="5" y="50" width="90" height="8" rx="1" fill="#8D6E63" stroke="#5D4037" strokeWidth="1"/>
                <rect x="5" y="90" width="90" height="8" rx="1" fill="#8D6E63" stroke="#5D4037" strokeWidth="1"/>
                <rect x="15" y="25" width="8" height="25" fill="#ef5350" stroke="#b71c1c" strokeWidth="1"/>
                <rect x="23" y="20" width="8" height="30" fill="#42A5F5" stroke="#1565C0" strokeWidth="1"/>
                <rect x="31" y="28" width="8" height="22" fill="#66BB6A" stroke="#2E7D32" strokeWidth="1"/>
                <path d="M70 50 L80 50 L75 75 Z" fill="#FF7043"/>
                <circle cx="75" cy="45" r="10" fill="#66BB6A"/>
            </svg>
        );

        const DoodleArmchair = () => (
            <svg viewBox="0 0 80 80" className="w-full h-full filter drop-shadow-md">
                <path d="M15 30 L65 30 L65 70 L15 70 Z" fill="#7E57C2" stroke="#512DA8" strokeWidth="2"/>
                <rect x="5" y="40" width="15" height="30" rx="3" fill="#673AB7" stroke="#512DA8" strokeWidth="1"/>
                <rect x="60" y="40" width="15" height="30" rx="3" fill="#673AB7" stroke="#512DA8" strokeWidth="1"/>
                <path d="M15 30 Q15 10 40 10 Q65 10 65 30" fill="#673AB7" stroke="#512DA8" strokeWidth="2"/>
            </svg>
        );

        const DoodleLamp = () => (
            <svg viewBox="0 0 60 100" className="w-full h-full filter drop-shadow-md">
                <path d="M30 100 L50 100 L45 40 L35 40 Z" fill="#5D4037"/>
                <path d="M15 40 L45 40 L55 10 L5 10 Z" fill="#FFF176" stroke="#FBC02D" strokeWidth="2"/>
                <line x1="30" y1="40" x2="30" y2="50" stroke="#5D4037" strokeWidth="2"/>
            </svg>
        );

        const DoodleRug = () => (
            <svg viewBox="0 0 100 60" className="w-full h-full opacity-90">
                <ellipse cx="50" cy="30" rx="48" ry="25" fill="#FFAB91" stroke="#D84315" strokeWidth="2"/>
                <ellipse cx="50" cy="30" rx="35" ry="15" fill="none" stroke="#FFCCBC" strokeWidth="3" strokeDasharray="5,5"/>
            </svg>
        );

        const DoodleBed = () => (
            <svg viewBox="0 0 100 70" className="w-full h-full filter drop-shadow-lg">
                <rect x="5" y="20" width="10" height="50" fill="#5D4037" rx="2"/>
                <rect x="85" y="30" width="10" height="40" fill="#5D4037" rx="2"/>
                <rect x="10" y="35" width="80" height="30" fill="#BBDEFB" stroke="#1976D2" strokeWidth="2"/>
                <path d="M10 35 L90 35 L90 65 L10 65 Z" fill="#90CAF9"/>
                <rect x="15" y="25" width="25" height="15" rx="5" fill="#fff" stroke="#ddd" strokeWidth="1"/>
            </svg>
        );

        const DoodleDesk = () => (
            <svg viewBox="0 0 100 80" className="w-full h-full filter drop-shadow-md">
                <rect x="5" y="20" width="90" height="10" fill="#8D6E63" stroke="#5D4037" strokeWidth="2"/>
                <rect x="10" y="30" width="10" height="45" fill="#5D4037"/>
                <rect x="80" y="30" width="10" height="45" fill="#5D4037"/>
                <rect x="60" y="30" width="20" height="20" fill="#A1887F"/>
                <circle cx="75" cy="40" r="2" fill="#FFD54F"/>
            </svg>
        );

        const DoodleChair = () => (
            <svg viewBox="0 0 60 80" className="w-full h-full filter drop-shadow-md">
                <rect x="15" y="40" width="30" height="5" fill="#8D6E63"/>
                <rect x="15" y="45" width="5" height="35" fill="#5D4037"/>
                <rect x="40" y="45" width="5" height="35" fill="#5D4037"/>
                <rect x="15" y="10" width="5" height="30" fill="#5D4037"/>
                <rect x="40" y="10" width="5" height="30" fill="#5D4037"/>
                <rect x="15" y="15" width="30" height="15" rx="2" fill="#A1887F"/>
            </svg>
        );

        const DoodleCupboard = () => (
            <svg viewBox="0 0 80 100" className="w-full h-full filter drop-shadow-md">
                <rect x="5" y="5" width="70" height="90" fill="#8D6E63" stroke="#5D4037" strokeWidth="2"/>
                <rect x="10" y="10" width="28" height="35" fill="#A1887F" stroke="#5D4037" strokeWidth="1"/>
                <rect x="42" y="10" width="28" height="35" fill="#A1887F" stroke="#5D4037" strokeWidth="1"/>
                <circle cx="34" cy="27" r="2" fill="#FFD54F"/>
                <circle cx="46" cy="27" r="2" fill="#FFD54F"/>
                <rect x="10" y="50" width="60" height="40" fill="#A1887F" stroke="#5D4037" strokeWidth="1"/>
            </svg>
        );

        const DoodleClock = () => (
            <svg viewBox="0 0 100 100" className="w-full h-full filter drop-shadow-md">
                <circle cx="50" cy="50" r="45" fill="#fff" stroke="#37474F" strokeWidth="4"/>
                <line x1="50" y1="50" x2="50" y2="20" stroke="#37474F" strokeWidth="3" strokeLinecap="round"/>
                <line x1="50" y1="50" x2="70" y2="50" stroke="#D84315" strokeWidth="3" strokeLinecap="round"/>
                <circle cx="50" cy="50" r="4" fill="#37474F"/>
                <line x1="50" y1="5" x2="50" y2="10" stroke="#CFD8DC" strokeWidth="2"/>
            </svg>
        );

        const DoodleTable = () => (
            <svg viewBox="0 0 100 60" className="w-full h-full filter drop-shadow-md">
                <rect x="5" y="10" width="90" height="10" rx="2" fill="#D7CCC8" stroke="#8D6E63" strokeWidth="2"/>
                <rect x="15" y="20" width="8" height="35" fill="#8D6E63"/>
                <rect x="77" y="20" width="8" height="35" fill="#8D6E63"/>
                <path d="M15 15 L85 15" stroke="white" opacity="0.3" strokeWidth="2"/>
            </svg>
        );

        const DoodleDoor = () => (
            <svg viewBox="0 0 60 100" className="w-full h-full filter drop-shadow-md">
                <rect x="5" y="5" width="50" height="90" fill="#8D6E63" stroke="#5D4037" strokeWidth="3"/>
                <rect x="12" y="12" width="15" height="35" fill="#5D4037" opacity="0.2"/>
                <rect x="33" y="12" width="15" height="35" fill="#5D4037" opacity="0.2"/>
                <rect x="12" y="53" width="15" height="35" fill="#5D4037" opacity="0.2"/>
                <rect x="33" y="53" width="15" height="35" fill="#5D4037" opacity="0.2"/>
                <circle cx="48" cy="50" r="3" fill="#FFD54F" stroke="#F57F17" strokeWidth="1"/>
            </svg>
        );

        const DoodleCooker = () => (
            <svg viewBox="0 0 80 100" className="w-full h-full filter drop-shadow-md">
                <rect x="10" y="20" width="60" height="80" rx="2" fill="#ECEFF1" stroke="#90A4AE" strokeWidth="2"/>
                <rect x="15" y="45" width="50" height="40" rx="2" fill="#37474F"/>
                <circle cx="25" cy="35" r="4" fill="#263238"/>
                <circle cx="40" cy="35" r="4" fill="#263238"/>
                <circle cx="55" cy="35" r="4" fill="#263238"/>
                <rect x="10" y="20" width="60" height="10" fill="#CFD8DC"/>
            </svg>
        );

        const DoodleToilet = () => (
            <svg viewBox="0 0 60 90" className="w-full h-full filter drop-shadow-md">
                <rect x="10" y="5" width="40" height="30" rx="2" fill="#fff" stroke="#CFD8DC" strokeWidth="2"/>
                <path d="M15 35 L15 60 Q15 80 30 80 Q45 80 45 60 L45 35 Z" fill="#fff" stroke="#CFD8DC" strokeWidth="2"/>
                <rect x="12" y="35" width="36" height="5" fill="#fff" stroke="#CFD8DC"/>
                <circle cx="40" cy="12" r="3" fill="#B0BEC5"/>
            </svg>
        );

        const DoodleSink = () => (
            <svg viewBox="0 0 60 80" className="w-full h-full filter drop-shadow-md">
                <path d="M5 20 L55 20 L50 45 L10 45 Z" fill="#fff" stroke="#CFD8DC" strokeWidth="2"/>
                <rect x="25" y="45" width="10" height="35" fill="#fff" stroke="#CFD8DC" strokeWidth="2"/>
                <path d="M30 20 L30 10 L35 12" fill="none" stroke="#90A4AE" strokeWidth="3"/>
            </svg>
        );

        const DoodleBath = () => (
            <svg viewBox="0 0 100 60" className="w-full h-full filter drop-shadow-md">
                <path d="M5 20 L95 20 L90 55 Q90 60 50 60 Q10 60 10 55 Z" fill="#fff" stroke="#81D4FA" strokeWidth="2"/>
                <path d="M85 20 L85 10 L80 12" fill="none" stroke="#90A4AE" strokeWidth="3"/>
                <rect x="15" y="60" width="5" height="5" fill="#546E7A"/>
                <rect x="80" y="60" width="5" height="5" fill="#546E7A"/>
            </svg>
        );

        const DoodleTree = () => (
            <svg viewBox="0 0 100 120" className="w-full h-full filter drop-shadow-lg">
                <rect x="40" y="60" width="20" height="60" fill="#795548"/>
                <circle cx="30" cy="50" r="25" fill="#43A047"/>
                <circle cx="70" cy="50" r="25" fill="#43A047"/>
                <circle cx="50" cy="30" r="30" fill="#66BB6A"/>
                <circle cx="20" cy="70" r="10" fill="#FFEB3B" opacity="0.5"/>
            </svg>
        );

        const DoodleBench = () => (
            <svg viewBox="0 0 100 60" className="w-full h-full filter drop-shadow-md">
                <rect x="10" y="25" width="80" height="5" rx="1" fill="#8D6E63" stroke="#5D4037"/>
                <rect x="10" y="10" width="80" height="8" rx="1" fill="#8D6E63" stroke="#5D4037"/>
                <rect x="15" y="30" width="6" height="15" fill="#5D4037"/>
                <rect x="79" y="30" width="6" height="15" fill="#5D4037"/>
                <rect x="8" y="10" width="5" height="30" fill="#5D4037"/>
                <rect x="87" y="10" width="5" height="30" fill="#5D4037"/>
            </svg>
        );

        const DoodleMat = () => (
            <svg viewBox="0 0 80 50" className="w-full h-full opacity-90">
                <rect x="5" y="10" width="70" height="30" rx="10" fill="#81D4FA" stroke="#29B6F6" strokeWidth="2"/>
                <path d="M15 10 L15 40 M25 10 L25 40 M35 10 L35 40 M45 10 L45 40 M55 10 L55 40 M65 10 L65 40" stroke="#E1F5FE" strokeWidth="2" opacity="0.5"/>
            </svg>
        );

        const DoodleBlocks = () => (
            <svg viewBox="0 0 60 60" className="w-full h-full filter drop-shadow-md">
                <rect x="10" y="30" width="20" height="20" fill="#EF5350" stroke="#B71C1C" strokeWidth="1"/>
                <text x="20" y="45" fontSize="12" fill="#fff" textAnchor="middle" fontWeight="bold" fontFamily="sans-serif">A</text>
                <rect x="30" y="30" width="20" height="20" fill="#42A5F5" stroke="#1565C0" strokeWidth="1"/>
                <text x="40" y="45" fontSize="12" fill="#fff" textAnchor="middle" fontWeight="bold" fontFamily="sans-serif">B</text>
                <rect x="20" y="10" width="20" height="20" fill="#FFEE58" stroke="#FBC02D" strokeWidth="1"/>
                <text x="30" y="25" fontSize="12" textAnchor="middle" fontWeight="bold" fill="#F57F17" fontFamily="sans-serif">C</text>
            </svg>
        );

        const DoodlePlant = () => <svg viewBox="0 0 40 40" className="w-full h-full"><path d="M20 40 L20 20" stroke="#4CAF50" strokeWidth="2"/><ellipse cx="15" cy="20" rx="5" ry="8" fill="#66BB6A" transform="rotate(-30 15 20)"/><ellipse cx="25" cy="20" rx="5" ry="8" fill="#66BB6A" transform="rotate(30 25 20)"/><rect x="15" y="30" width="10" height="10" fill="#E64A19"/></svg>;

        // --- FINALER FUSSBALL: Geometrisch sauber ---
        const DoodleBall = () => (
            <svg viewBox="0 0 100 100" className="w-full h-full filter drop-shadow-md">
            <defs>
                <clipPath id="ballClip">
                <circle cx="50" cy="50" r="48" />
                </clipPath>
            </defs>
            {/* Background Circle */}
            <circle cx="50" cy="50" r="48" fill="white" stroke="#212121" strokeWidth="3" />
            
            <g clipPath="url(#ballClip)">
                {/* Central Pentagon (black) */}
                <polygon points="50,34 65.2,45.1 59.4,62.9 40.6,62.9 34.8,45.1" fill="#212121" />

                {/* Lines connecting center to outer shapes */}
                <line x1="50" y1="34" x2="50" y2="0" stroke="#212121" strokeWidth="2" />
                <line x1="65.2" y1="45.1" x2="98" y2="34" stroke="#212121" strokeWidth="2" />
                <line x1="59.4" y1="62.9" x2="80" y2="95" stroke="#212121" strokeWidth="2" />
                <line x1="40.6" y1="62.9" x2="20" y2="95" stroke="#212121" strokeWidth="2" />
                <line x1="34.8" y1="45.1" x2="2" y2="34" stroke="#212121" strokeWidth="2" />

                {/* Outer Black Shapes (Pentagon segments) */}
                <path d="M35 0 L65 0 L50 15 Z" fill="#212121" /> {/* Top */}
                <path d="M85 18 L100 45 L90 55 L80 35 Z" fill="#212121" /> {/* Right Top */}
                <path d="M70 85 L95 100 L75 100 L65 85 Z" fill="#212121" /> {/* Right Bottom */}
                <path d="M30 85 L5 100 L25 100 L35 85 Z" fill="#212121" /> {/* Left Bottom */}
                <path d="M15 18 L0 45 L10 55 L20 35 Z" fill="#212121" /> {/* Left Top */}
            </g>
            </svg>
        );

        const DoodleTeddy = () => <svg viewBox="0 0 40 40" className="w-full h-full"><circle cx="20" cy="15" r="10" fill="#D7CCC8"/><circle cx="15" cy="12" r="2" fill="#5D4037"/><circle cx="25" cy="12" r="2" fill="#5D4037"/><circle cx="20" cy="28" r="12" fill="#D7CCC8"/><circle cx="12" cy="25" r="4" fill="#BCAAA4"/><circle cx="28" cy="25" r="4" fill="#BCAAA4"/></svg>;

        // Redesigned Books - Larger, clear stack
        const DoodleBooks = () => (
            <svg viewBox="0 0 80 60" className="w-full h-full filter drop-shadow-sm">
                {/* Bottom Book */}
                <rect x="5" y="40" width="70" height="12" rx="2" fill="#1565C0" stroke="#0D47A1" strokeWidth="1" />
                <rect x="8" y="43" width="64" height="6" fill="#fff" opacity="0.4" />
                
                {/* Middle Book */}
                <rect x="8" y="28" width="65" height="12" rx="2" fill="#43A047" stroke="#2E7D32" strokeWidth="1" />
                <rect x="11" y="31" width="59" height="6" fill="#fff" opacity="0.4" />

                {/* Top Book (tilted) */}
                <g transform="rotate(-5, 40, 20)">
                    <rect x="5" y="16" width="68" height="12" rx="2" fill="#E53935" stroke="#B71C1C" strokeWidth="1" />
                    <rect x="8" y="19" width="62" height="6" fill="#fff" opacity="0.4" />
                </g>
            </svg>
        );

        const DoodlePot = () => <svg viewBox="0 0 40 30" className="w-full h-full"><path d="M5 5 L35 5 L30 25 L10 25 Z" fill="#FF7043"/><rect x="2" y="2" width="36" height="3" fill="#F4511E"/></svg>;
        const DoodleCloud = () => <svg viewBox="0 0 60 40" className="w-full h-full opacity-80"><path d="M10 30 Q10 10 30 10 Q50 10 50 30" fill="#fff"/><circle cx="20" cy="30" r="10" fill="#fff"/><circle cx="40" cy="30" r="12" fill="#fff"/><rect x="20" y="25" width="20" height="15" fill="#fff"/></svg>;

        const DoodleShower = () => (
            <svg viewBox="0 0 60 100" className="w-full h-full">
                {/* Cabin/Glass */}
                <rect x="5" y="5" width="50" height="90" fill="#E1F5FE" stroke="#81D4FA" strokeWidth="2" opacity="0.5"/>
                <line x1="5" y1="5" x2="55" y2="5" stroke="#81D4FA" strokeWidth="2"/>
                
                {/* Shower Head Arm */}
                <path d="M30 5 L30 20 L45 20" fill="none" stroke="#90A4AE" strokeWidth="3" strokeLinecap="round" />
                
                {/* Shower Head */}
                <path d="M40 20 L50 20 L55 25 L35 25 Z" fill="#CFD8DC" stroke="#90A4AE" strokeWidth="1"/>
                
                {/* Water Drops */}
                <g stroke="#4FC3F7" strokeWidth="1.5" strokeDasharray="3,3" opacity="0.8">
                    <line x1="40" y1="28" x2="35" y2="50" />
                    <line x1="45" y1="28" x2="45" y2="55" />
                    <line x1="50" y1="28" x2="55" y2="50" />
                </g>
                
                {/* Handle */}
                <line x1="10" y1="45" x2="10" y2="60" stroke="#90A4AE" strokeWidth="2" strokeLinecap="round"/>
            </svg>
        );

        const DoodleMirror = () => <svg viewBox="0 0 40 60" className="w-full h-full"><rect x="5" y="5" width="30" height="50" fill="#E1F5FE" stroke="#81D4FA" strokeWidth="2"/><path d="M10 45 L30 10" stroke="#fff" opacity="0.5" strokeWidth="2"/></svg>;

        // Updated Poster - Vertical, dark frame, space theme
        const DoodlePoster = () => (
            <svg viewBox="0 0 40 50" className="w-full h-full filter drop-shadow-sm">
                <rect x="0" y="0" width="40" height="50" fill="#1a237e" stroke="#283593" strokeWidth="2"/> {/* Dark Blue Background */}
                <circle cx="20" cy="20" r="8" fill="#fff9c4" opacity="0.9"/> {/* Moon */}
                <circle cx="10" cy="10" r="1" fill="#fff"/>
                <circle cx="30" cy="10" r="1.5" fill="#fff"/>
                <circle cx="15" cy="35" r="1" fill="#fff"/>
                <circle cx="35" cy="40" r="1" fill="#fff"/>
                <path d="M10 40 L20 25 L30 40 Z" fill="#5c6bc0"/> {/* Mountain/Shape */}
            </svg>
        );


        const DoodleSwing = () => (
            <svg viewBox="0 0 80 80" className="w-full h-full">
                {/* Updated Swing - wider top bar, clearer ropes */}
                <path d="M10 80 L25 10 L55 10 L70 80" fill="none" stroke="#5D4037" strokeWidth="3" strokeLinecap="round"/>
                <line x1="25" y1="10" x2="25" y2="55" stroke="#333" strokeWidth="1"/>
                <line x1="55" y1="10" x2="55" y2="55" stroke="#333" strokeWidth="1"/>
                <rect x="20" y="55" width="40" height="5" rx="2" fill="#EF5350"/>
            </svg>
        );

        const DoodleFlower = () => <svg viewBox="0 0 30 40" className="w-full h-full"><line x1="15" y1="40" x2="15" y2="15" stroke="#4CAF50" strokeWidth="2"/><circle cx="15" cy="15" r="5" fill="#FFEB3B"/><circle cx="15" cy="8" r="4" fill="#F06292"/><circle cx="22" cy="15" r="4" fill="#F06292"/><circle cx="8" cy="15" r="4" fill="#F06292"/><circle cx="15" cy="22" r="4" fill="#F06292"/></svg>;
        const DoodlePicture = () => <svg viewBox="0 0 40 30" className="w-full h-full"><rect x="0" y="0" width="40" height="30" fill="#fff" stroke="#FFB74D" strokeWidth="3"/><circle cx="10" cy="10" r="3" fill="#FDD835"/><path d="M5 25 L15 15 L25 25" fill="#81C784"/></svg>;
        const DoodleBook = () => <svg viewBox="0 0 40 30" className="w-full h-full"><rect x="5" y="10" width="30" height="5" fill="#42A5F5"/><rect x="5" y="15" width="30" height="5" fill="#fff" stroke="#ddd"/><rect x="5" y="20" width="30" height="5" fill="#EF5350"/></svg>;

        // --- SLIDE COMPONENTS ---

        const SlideIntro = () => (
        <div className="flex flex-col items-center justify-center h-full animate-pop font-heading">
            <div className="bg-white border-4 border-[#e67e22] rounded-[3rem] p-12 text-center shadow-[8px_8px_0px_0px_rgba(230,126,34,0.3)] rotate-1 max-w-3xl relative overflow-hidden">
            <div className="absolute -top-10 -left-10 w-32 h-32 bg-yellow-200 rounded-full opacity-50"></div>
            <div className="absolute -bottom-10 -right-10 w-32 h-32 bg-orange-200 rounded-full opacity-50"></div>
            <h1 className="text-7xl font-bold text-[#d35400] mb-6 drop-shadow-sm">WELCOME HOME!</h1>
            <p className="text-3xl text-[#5e3c23] font-hand">Today we are architects and designers.</p>
            <div className="mt-8 flex justify-center gap-6 items-end">
                <div className="w-20 h-20"><IlluLivingRoom /></div>
                <div className="w-24 h-24 animate-bounce"><IlluBedroom /></div>
                <div className="w-20 h-20"><IlluKitchen /></div>
            </div>
            </div>
        </div>
        );

        const SlideBrainstorm = () => {
        const [words, setWords] = useState([]);
        const [inputValue, setInputValue] = useState("");
        const inputRef = useRef(null);

        const addWord = () => {
            if (inputValue.trim()) {
            setWords([...words, inputValue.trim()]);
            setInputValue("");
            inputRef.current.focus();
            }
        };

        const handleKeyDown = (e) => {
            if (e.key === 'Enter') addWord();
        };

        const removeWord = (index) => {
            setWords(words.filter((_, i) => i !== index));
        };

        const getRotation = (i) => (i % 2 === 0 ? 2 : -2) + (i % 3 - 1);

        return (
            <div className="flex flex-col items-center justify-start h-full font-heading w-full">
            <h2 className="text-5xl font-bold text-[#d35400] mb-6 bg-white px-8 py-3 rounded-2xl border-2 border-[#5e3c23] shadow-md transform -rotate-1">
                What do you already know?
            </h2>
            
            <div className="flex gap-4 mb-8 w-full max-w-2xl">
                <input 
                ref={inputRef}
                type="text" 
                value={inputValue}
                onChange={(e) => setInputValue(e.target.value)}
                onKeyDown={handleKeyDown}
                placeholder="Type a word..."
                className="flex-1 p-4 text-2xl border-2 border-[#8b5e3c] rounded-xl focus:outline-none focus:ring-4 focus:ring-orange-200 font-hand"
                />
                <button 
                onClick={addWord}
                className="bg-[#8bc34a] hover:bg-[#7cb342] text-white p-4 rounded-xl border-b-4 border-[#558b2f] active:border-b-0 active:translate-y-1 transition-all"
                >
                <Plus size={32} strokeWidth={3} />
                </button>
            </div>

            <div className="cork-board w-full max-w-5xl flex-1 rounded-2xl border-8 border-[#5d4037] p-8 overflow-y-auto shadow-inner relative">
                <div className="absolute top-0 left-0 w-full h-full pointer-events-none opacity-20 bg-repeat" style={{backgroundImage: "url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIi8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiMwMDAiIG9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4=')"}}></div>
                
                {words.length === 0 && (
                    <div className="h-full flex items-center justify-center opacity-40">
                        <div className="text-center">
                            <div className="text-6xl mb-2">ü§î</div>
                            <div className="text-3xl font-hand text-[#5d4037]">No words yet...</div>
                        </div>
                    </div>
                )}

                <div className="flex flex-wrap gap-6 justify-center items-start content-start">
                {words.map((word, i) => (
                    <div 
                    key={i} 
                    className="bg-[#fff9c4] text-[#5d4037] p-4 pr-10 shadow-lg relative font-hand text-3xl min-w-[120px] text-center transition-transform hover:scale-110 cursor-default"
                    style={{
                        transform: `rotate(${getRotation(i)}deg)`,
                        clipPath: 'polygon(0% 0%, 100% 0%, 100% 90%, 95% 100%, 0% 100%)'
                    }}
                    >
                    <div className="absolute top-[-10px] left-1/2 -translate-x-1/2 w-4 h-12 bg-[#ffffff] opacity-40 rotate-1"></div>
                    {word}
                    <button 
                        onClick={() => removeWord(i)}
                        className="absolute top-1 right-1 text-[#a1887f] hover:text-[#d32f2f]"
                    >
                        <X size={16} />
                    </button>
                    </div>
                ))}
                </div>
            </div>
            </div>
        );
        };

        const SlideHouseModel = () => {
        const [revealed, setRevealed] = useState({ 
            abby: false, bath: false, parents: false, 
            dining: false, kitchen: false, living: false 
        });
        
        const toggle = (room) => setRevealed(prev => ({...prev, [room]: !prev[room]}));

        const Room = ({ name, isRevealed, onClick, icon, color }) => (
            <div onClick={onClick} className={`relative border-4 border-[#5e3c23] ${color} flex flex-col items-center justify-center cursor-pointer transition-all hover:brightness-105 active:scale-95 h-full w-full select-none rounded-xl overflow-hidden shadow-sm`}>
            {!isRevealed ? 
                <div className="text-5xl opacity-30 font-bold text-[#5e3c23] animate-pulse font-heading">?</div> 
                : 
                <div className="animate-pop text-center flex flex-col items-center w-full h-full p-2">
                <div className="w-full h-full flex items-center justify-center opacity-80 scale-125">{icon}</div>
                <div className="absolute bottom-2 font-hand text-lg font-bold bg-white/90 px-3 py-1 rounded-full border-2 border-[#5e3c23] shadow-sm whitespace-nowrap">{name}</div>
                </div>
            }
            </div>
        );

        return (
            <div className="flex flex-col items-center h-full justify-center w-full">
            <h2 className="text-4xl font-heading font-bold text-[#5e3c23] mb-4 bg-white px-6 py-2 rounded-xl border-2 border-[#5e3c23] shadow-md transform -rotate-1">What rooms are in the house?</h2>
            <div className="w-full max-w-[900px] h-[500px] flex flex-col shadow-[10px_10px_0px_0px_rgba(0,0,0,0.1)]">
                <div className="w-full h-24 roof relative z-10" style={{clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)', marginBottom: '-4px'}}></div>
                <div className="flex-1 bg-[#fff3e0] border-x-4 border-b-4 border-[#5e3c23] flex rounded-b-lg overflow-hidden">
                {/* Left Column */}
                <div className="w-1/3 flex flex-col border-r-4 border-[#5e3c23]">
                    <div className="h-1/2 p-3"><Room name="Abby's bedroom" isRevealed={revealed.abby} onClick={() => toggle('abby')} icon={<IlluBedroom/>} color="bg-purple-100" /></div>
                    <div className="h-1/2 p-3 border-t-4 border-[#5e3c23] wood-pattern"><div className="w-full h-full bg-orange-50 rounded-xl"><Room name="dining room" isRevealed={revealed.dining} onClick={() => toggle('dining')} icon={<IlluDining/>} color="bg-orange-100" /></div></div>
                </div>
                {/* Middle Column */}
                <div className="w-1/3 flex flex-col border-r-4 border-[#5e3c23]">
                    <div className="h-1/2 p-3"><Room name="bathroom" isRevealed={revealed.bath} onClick={() => toggle('bath')} icon={<IlluBathroom/>} color="bg-blue-50" /></div>
                    <div className="h-1/2 p-3 border-t-4 border-[#5e3c23]"><Room name="kitchen" isRevealed={revealed.kitchen} onClick={() => toggle('kitchen')} icon={<IlluKitchen/>} color="bg-yellow-50" /></div>
                </div>
                {/* Right Column */}
                <div className="w-1/3 flex flex-col">
                    <div className="h-1/2 p-3"><Room name="Mr and Mrs Blackwell's bedroom" isRevealed={revealed.parents} onClick={() => toggle('parents')} icon={<IlluBedroom/>} color="bg-indigo-100" /></div>
                    <div className="h-1/2 p-3 border-t-4 border-[#5e3c23]"><Room name="living room" isRevealed={revealed.living} onClick={() => toggle('living')} icon={<IlluLivingRoom/>} color="bg-green-50" /></div>
                </div>
                </div>
            </div>
            <div className="flex gap-12 mt-4 text-2xl font-hand font-bold text-[#5e3c23]">
                <div className="bg-white px-4 py-1 rounded-lg shadow-sm border border-[#5e3c23]">‚¨ÜÔ∏è UPSTAIRS</div>
                <div className="bg-white px-4 py-1 rounded-lg shadow-sm border border-[#5e3c23]">‚¨áÔ∏è DOWNSTAIRS</div>
            </div>
            </div>
        );
        };

        const SlideInfo = () => (
        <div className="flex flex-col items-center h-full justify-start gap-6 p-4 overflow-y-auto">
            <h2 className="text-5xl font-heading font-bold text-[#d35400] mb-2 bg-white px-6 py-2 rounded-xl border-2 border-[#5e3c23] shadow-md transform -rotate-1">Language Box</h2>
            <div className="flex gap-8 w-full max-w-5xl">
            <div className="flex-1 bg-white border-4 border-[#5e3c23] rounded-2xl p-6 shadow-[8px_8px_0px_0px_rgba(139,94,60,0.5)]">
                <h3 className="text-4xl font-heading font-bold text-[#5e3c23] mb-4 flex items-center gap-2">
                    <span className="text-5xl">üè†</span> Rooms & Furniture
                </h3>
                <div className="grid grid-cols-2 gap-4 text-xl font-hand">
                <div className="bg-orange-50 p-4 rounded-lg border border-orange-200">
                    <h4 className="font-bold mb-2 text-2xl text-[#d35400]">Rooms</h4>
                    <ul className="list-disc list-inside space-y-1">
                    <li>bathroom</li>
                    <li>bedroom</li>
                    <li>dining room</li>
                    <li>kitchen</li>
                    <li>living room</li>
                    <li>hall</li>
                    <li>garden</li>
                    </ul>
                </div>
                <div className="bg-blue-50 p-4 rounded-lg border border-blue-200">
                    <h4 className="font-bold mb-2 text-2xl text-[#0277bd]">Furniture</h4>
                    <ul className="list-disc list-inside space-y-1">
                    <li>armchair</li>
                    <li>bed</li>
                    <li>cupboard</li>
                    <li>desk</li>
                    <li>lamp</li>
                    <li>shelf</li>
                    <li>sofa</li>
                    <li>table</li>
                    <li>wardrobe</li>
                    {/* Added new items */}
                    <li>shower</li>
                    <li>toilet</li>
                    <li>mirror</li>
                    <li>rug</li>
                    <li>picture</li>
                    <li>poster</li>
                    </ul>
                </div>
                </div>
            </div>
            <div className="flex-1 bg-[#E0F2F1] border-4 border-[#5e3c23] rounded-2xl p-6 shadow-[8px_8px_0px_0px_rgba(139,94,60,0.5)] relative">
                <div className="absolute -top-4 right-10 w-32 h-8 bg-[#ffecb3] opacity-80 rotate-2 border border-[#5e3c23]"></div>
                <h3 className="text-4xl font-heading font-bold text-[#5e3c23] mb-4 flex items-center gap-2">
                    <span className="text-5xl">üí¨</span> Grammar Focus
                </h3>
                <div className="flex flex-col gap-4 text-xl font-hand">
                <div>
                    <p className="mb-2 text-2xl">To describe a room, use:</p>
                    <div className="bg-white p-3 rounded-xl border-2 border-[#009688] mb-2 shadow-sm">
                    <span className="font-bold text-[#00796b] text-2xl">There is</span> a sofa. (Singular)
                    </div>
                    <div className="bg-white p-3 rounded-xl border-2 border-[#009688] shadow-sm">
                    <span className="font-bold text-[#00796b] text-2xl">There are</span> two armchairs. (Plural)
                    </div>
                </div>
                <div className="bg-[#FFF9C4] p-4 rounded-xl border-2 border-[#FBC02D] mt-4 relative shadow-sm">
                    <div className="absolute -top-4 -right-2 text-5xl animate-bounce">‚òùÔ∏è</div>
                    <h4 className="font-bold text-[#F57F17] mb-1 text-2xl">Important Rule!</h4>
                    <p className="text-xl leading-tight">In English, don't forget <b>THERE</b>!</p>
                    <div className="mt-2 text-lg bg-white/60 p-3 rounded border border-[#FBC02D] space-y-2">
                    <div className="text-red-500 line-through decoration-4 flex items-center gap-2"><span className="text-xl">‚ùå</span> In my room is a bed.</div>
                    <div className="text-green-700 font-bold flex items-center gap-2"><span className="text-xl">‚úÖ</span> In my room <span className="underline decoration-wavy decoration-[#F57F17]">there is</span> a bed.</div>
                    </div>
                </div>
                </div>
            </div>
            </div>
        </div>
        );

        const SlideFurnitureQuiz = ({ foundItems, setFoundItems }) => {
        const [selectedItem, setSelectedItem] = useState(null);
        const [currentRoomIdx, setCurrentRoomIdx] = useState(0);

        const wallBase = 'bottom-[10%]'; 

        const rooms = [
            {
            id: 'living',
            name: 'Living Room',
            bg: 'bg-[#C8E6C9]',
            floor: 'bg-[#8D6E63]',
            icon: <DoodleSofa />,
            items: [
                { id: 'win', label: 'window', content: <DoodleWindow />, type: 'component', pos: 'top-10 left-10 w-24 h-24' },
                { id: 'shl', label: 'shelf', content: <DoodleShelf />, type: 'component', pos: 'top-10 right-32 w-32 h-32' },
                { id: 'pic', label: 'picture', content: <DoodlePicture />, type: 'component', pos: 'top-10 right-10 w-20 h-16' },
                { id: 'sof', label: 'sofa', content: <DoodleSofa />, type: 'component', pos: `${wallBase} left-10 w-48 h-32` },
                { id: 'tv', label: 'TV', content: <DoodleTV />, type: 'component', pos: `${wallBase} right-10 w-40 h-32` },
                { id: 'arm', label: 'armchair', content: <DoodleArmchair />, type: 'component', pos: `${wallBase} left-[220px] w-24 h-24` },
                { id: 'lmp', label: 'lamp', content: <DoodleLamp />, type: 'component', pos: `${wallBase} right-56 w-16 h-40` },
                { id: 'rug', content: <DoodleRug />, type: 'component', pos: 'bottom-[5%] center w-48 h-24', decorative: true },
            ]
            },
            {
            id: 'bedroom',
            name: 'Bedroom',
            bg: 'bg-[#E1BEE7]',
            floor: 'bg-[#A1887F]',
            icon: <DoodleBed />,
            items: [
                { id: 'pos', label: 'poster', content: <DoodlePoster />, type: 'component', pos: 'top-10 left-1/3 w-20 h-28' }, // NEW POSTER
                { id: 'bed', label: 'bed', content: <DoodleBed />, type: 'component', pos: `${wallBase} left-10 w-48 h-32` },
                { id: 'dsk', label: 'desk', content: <DoodleDesk />, type: 'component', pos: `${wallBase} right-10 w-32 h-24` },
                { id: 'chr', label: 'chair', content: <DoodleChair />, type: 'component', pos: `${wallBase} right-[200px] w-12 h-20` },
                { id: 'toy', label: 'toy', content: <DoodleBlocks />, type: 'component', pos: 'bottom-[5%] left-1/2 w-16 h-16' },
                { id: 'ted', content: <DoodleTeddy />, type: 'component', pos: 'bottom-[5%] left-[58%] w-10 h-10', decorative: true },
                // Updated Book Item: Larger and on the desk
                { id: 'bok', label: 'books', content: <DoodleBooks />, type: 'component', pos: 'bottom-[25%] right-[20px] w-20 h-16' }, 
            ]
            },
            {
            id: 'kitchen',
            name: 'Kitchen', 
            bg: 'bg-[#FFF9C4]',
            floor: 'bg-[#795548]',
            icon: <DoodleCooker />,
            items: [
                // Reordered items for better composition
                { id: 'dor', label: 'door', content: <DoodleDoor />, type: 'component', pos: 'bottom-[15%] left-10 w-24 h-48' }, // Door on floor line
                { id: 'cok', label: 'stove', content: <DoodleCooker />, type: 'component', pos: `${wallBase} left-[150px] w-24 h-32` }, // Stove next to door
                // Pot removed
                { id: 'cup', label: 'cupboard', content: <DoodleCupboard />, type: 'component', pos: 'top-32 left-[260px] w-24 h-32' }, // Cupboard moved right and down
                { id: 'win2', content: <DoodleWindow />, type: 'component', pos: 'top-32 right-[150px] w-24 h-24', decorative: true }, // Window moved right and down
                { id: 'clk', label: 'clock', content: <DoodleClock />, type: 'component', pos: 'top-5 left-[300px] w-12 h-12' },
                { id: 'tbl', label: 'table', content: <DoodleTable />, type: 'component', pos: 'bottom-[8%] right-10 w-48 h-32' }, // Table slightly larger
                { id: 'plt', content: <DoodlePlant />, type: 'component', pos: 'bottom-[25%] right-[60px] w-12 h-12', decorative: true }, // Plant on table, larger
            ]
            },
            {
            id: 'bathroom',
            name: 'Bathroom',
            bg: 'bg-[#B3E5FC]',
            floor: 'bg-[#90A4AE]',
            icon: <DoodleBath />,
            items: [
                // Reordered: Mat first, then others
                { id: 'mat', content: <DoodleMat />, type: 'component', pos: 'bottom-[5%] center w-24 h-16', decorative: true },
                { id: 'bat', content: <DoodleBath />, type: 'component', pos: `${wallBase} left-10 w-48 h-24`, decorative: true },
                { id: 'toi', label: 'toilet', content: <DoodleToilet />, type: 'component', pos: `${wallBase} left-[220px] w-16 h-28` },
                { id: 'snk', label: 'sink', content: <DoodleSink />, type: 'component', pos: `${wallBase} right-[150px] w-16 h-28` }, // Moved Left
                { id: 'shw', content: <DoodleShower />, type: 'component', pos: `${wallBase} right-5 w-24 h-48`, decorative: true },
                { id: 'mir', content: <DoodleMirror />, type: 'component', pos: 'bottom-[35%] right-[162px] w-10 h-16', decorative: true }, // Moved Left & Down
            ]
            },
            {
                id: 'garden',
                name: 'Garden',
                bg: 'bg-[#E1F5FE]',
                floor: 'bg-[#81C784]',
                icon: <DoodleTree />,
                items: [
                { id: 'bal', label: 'football', content: <DoodleBall />, type: 'component', pos: 'bottom-[10%] left-[30%] w-16 h-16' }, // Moved Left (30%)
                { id: 'tre', label: 'tree', content: <DoodleTree />, type: 'component', pos: `${wallBase} left-10 w-56 h-64` },
                { id: 'ben', label: 'bench', content: <DoodleBench />, type: 'component', pos: `${wallBase} right-20 w-40 h-20` }, 
                { id: 'swg', content: <DoodleSwing />, type: 'component', pos: `${wallBase} left-[250px] w-32 h-40`, decorative: true },
                { id: 'cld1', content: <DoodleCloud />, type: 'component', pos: 'top-10 left-20 w-24 h-16', decorative: true },
                { id: 'cld2', content: <DoodleCloud />, type: 'component', pos: 'top-5 right-40 w-20 h-12', decorative: true },
                { id: 'flw1', content: <DoodleFlower />, type: 'component', pos: 'bottom-[10%] left-[200px] w-8 h-10', decorative: true },
                { id: 'flw2', content: <DoodleFlower />, type: 'component', pos: 'bottom-[12%] right-[150px] w-8 h-10', decorative: true },
                ]
            }
        ];

        const currentRoom = rooms[currentRoomIdx];

        const handleItemClick = (item) => {
            setSelectedItem(item);
            if (!foundItems.includes(item.id)) {
            setFoundItems([...foundItems, item.id]);
            }
        };

        const foundItemsInThisRoom = currentRoom.items.filter(i => !i.decorative && foundItems.includes(i.id));

        // Count non-decorative items in current room
        const totalItemsInRoom = currentRoom.items.filter(i => !i.decorative).length;
        const foundInRoom = currentRoom.items.filter(i => !i.decorative && foundItems.includes(i.id)).length;

        return (
            <div className="flex flex-col h-full w-full gap-4 max-w-6xl mx-auto">
            
            {/* HEADER / NAVIGATION TABS */}
            <div className="flex justify-between items-end px-2">
                <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
                    {rooms.map((room, idx) => (
                        <button 
                            key={room.id}
                            onClick={() => { setCurrentRoomIdx(idx); setSelectedItem(null); }}
                            className={`flex items-center gap-2 px-4 py-2 rounded-t-xl border-t-2 border-x-2 transition-all font-heading ${currentRoomIdx === idx ? 'bg-white border-[#8b5e3c] text-[#5e3c23] -mb-[2px] z-10 font-bold' : 'bg-[#e6c9a8] border-transparent opacity-70 hover:opacity-100'}`}
                        >
                            <div className="w-8 h-8">{room.icon}</div>
                            <span className="whitespace-nowrap hidden md:block">{room.name}</span>
                        </button>
                    ))}
                </div>
                <div className="bg-white px-4 py-2 rounded-xl border-2 border-[#8b5e3c] text-[#5e3c23] font-heading font-bold text-sm mb-2 shadow-sm flex items-center gap-2">
                    <span>Found:</span>
                    <div className="flex gap-1">
                        {[...Array(totalItemsInRoom)].map((_, i) => (
                            <div key={i} className={`w-3 h-3 rounded-full ${i < foundInRoom ? 'bg-green-500' : 'bg-gray-200'}`}></div>
                        ))}
                    </div>
                </div>
            </div>

            {/* MAIN CONTENT AREA */}
            <div className="flex flex-col md:flex-row h-[500px] gap-4">
                
                {/* ROOM SCENE (INTERACTIVE) */}
                <div 
                    className={`flex-grow relative ${currentRoom.bg} border-4 border-[#5e3c23] rounded-2xl shadow-inner overflow-hidden animate-slide-in group cursor-pointer`}
                    onClick={() => setSelectedItem(null)}
                >
                {/* Wall/Floor Division */}
                <div className={`absolute bottom-0 w-full h-[25%] ${currentRoom.floor} border-t-4 border-[#5e3c23]`}></div>
                
                {/* Background Title */}
                <div className="absolute top-4 left-4 font-heading font-bold text-5xl text-black opacity-5 uppercase tracking-widest pointer-events-none">{currentRoom.name}</div>

                {/* Items */}
                {currentRoom.items.map(item => {
                    const isSelected = selectedItem?.id === item.id;
                    const isFound = foundItems.includes(item.id);
                    const isDimmed = selectedItem && !isSelected;

                    if (item.decorative) {
                        return (
                            <div key={item.id} className={`absolute ${item.pos} pointer-events-none transition-opacity duration-300 ${isDimmed ? 'opacity-20 blur-[1px]' : 'opacity-100'}`}>
                                {item.content}
                            </div>
                        );
                    }

                    return (
                    <div 
                        key={item.id} 
                        className={`absolute ${item.pos} transition-all duration-300 cursor-pointer 
                            ${isSelected ? 'z-50 scale-110 drop-shadow-[0_0_15px_rgba(255,255,255,0.8)]' : 'z-10 hover:z-40 hover:scale-105'} 
                            ${isDimmed ? 'opacity-30 blur-[1px] grayscale' : 'opacity-100'}
                        `}
                        onClick={(e) => { e.stopPropagation(); handleItemClick(item); }}
                    >
                        {item.content}
                        {/* Floating Indicator Dot if not found yet */}
                        {!isFound && !isSelected && !isDimmed && (
                            <div className="absolute -top-3 -right-3 w-6 h-6 bg-[#d35400] rounded-full animate-bounce border-2 border-white flex items-center justify-center text-white font-bold text-xs">?</div>
                        )}
                        {/* Found Checkmark */}
                        {isFound && !isSelected && !isDimmed && (
                            <div className="absolute -top-3 -right-3 w-6 h-6 bg-[#66BB6A] rounded-full flex items-center justify-center border-2 border-white shadow-sm">
                                <div className="w-3 h-3 text-white"><Check size={14} strokeWidth={4} /></div>
                            </div>
                        )}
                    </div>
                    );
                })}
                </div>

                {/* INFO CARD / SIDEBAR */}
                <div className="w-full md:w-1/3 min-w-[300px] flex flex-col gap-4 h-full">
                    
                    {/* The Flashcard */}
                    <div className={`bg-white border-4 border-[#8b5e3c] rounded-2xl p-6 shadow-[4px_4px_0px_0px_rgba(139,94,60,0.3)] flex flex-col items-center justify-center text-center transition-all duration-300 relative overflow-hidden ${selectedItem ? 'flex-[2] opacity-100' : 'flex-1 opacity-50 bg-gray-50'}`}>
                        {selectedItem ? (
                            <>
                                <div className="absolute top-0 left-0 w-full h-4 bg-[#ffcc80]"></div>
                                <div className="w-48 h-48 mb-6 drop-shadow-xl animate-pop p-4 bg-gray-50 rounded-full border-2 border-dashed border-gray-200">
                                    {selectedItem.content}
                                </div>
                                <h3 className="text-5xl font-heading font-bold text-[#d35400] mb-2">{selectedItem.label}</h3>
                                <p className="text-[#5e3c23] font-hand text-2xl">"In the {currentRoom.name.toLowerCase()}, there is a <b>{selectedItem.label}</b>."</p>
                            </>
                        ) : (
                            <div className="text-[#5e3c23] opacity-40 flex flex-col items-center">
                                <div className="text-6xl mb-4">üëÜ</div>
                                <p className="text-2xl font-hand font-bold">Tap an item to learn its name!</p>
                            </div>
                        )}
                    </div>

                    {/* Word List Container */}
                    <div className="bg-[#fff3e0] border-4 border-[#8b5e3c] rounded-2xl p-4 shadow-sm flex-1 overflow-y-auto min-h-[150px]">
                        <h3 className="font-heading font-bold text-xl text-[#5e3c23] mb-3 text-center sticky top-0 bg-[#fff3e0] pb-2 border-b-2 border-[#e6c9a8]">
                            üìù My Word Collection
                        </h3>
                        <div className="flex flex-wrap gap-2 justify-center">
                            {foundItemsInThisRoom.length > 0 ? (
                                foundItemsInThisRoom.map(item => (
                                    <div key={item.id} className="bg-white border-2 border-[#8b5e3c] px-3 py-1 rounded-lg font-hand text-lg text-[#5e3c23] shadow-sm animate-pop flex items-center gap-2">
                                        <span className="text-green-600 font-bold">‚úì</span> {item.label}
                                    </div>
                                ))
                            ) : (
                                <div className="text-[#a1887f] font-hand text-center mt-4">Click on objects to collect words!</div>
                            )}
                        </div>
                    </div>

                </div>

            </div>
            </div>
        );
        };

        // SLIDE 5: YOUR TURN (TASK)
        const SlideTask = () => {
        const [initialMinutes, setInitialMinutes] = useState(20);
        const [time, setTime] = useState(1200);
        const [isActive, setIsActive] = useState(false);

        useEffect(() => {
            let interval = null;
            if (isActive && time > 0) {
            interval = setInterval(() => {
                setTime((prevTime) => prevTime - 1);
            }, 1000);
            } else if (time === 0) {
            setIsActive(false);
            }
            return () => clearInterval(interval);
        }, [isActive, time]);

        const toggleTimer = () => setIsActive(!isActive);
        
        const resetTimer = () => {
            setIsActive(false);
            setTime(initialMinutes * 60);
        };

        const handleInputChange = (e) => {
            const val = Math.max(1, parseInt(e.target.value) || 0); // Min 1 minute
            setInitialMinutes(val);
            setTime(val * 60);
            setIsActive(false);
        };

        const formatTime = (seconds) => {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        };

        return (
            <div className="flex flex-col items-center justify-center h-full">
            <div className="bg-white border-4 border-[#8b5e3c] rounded-3xl p-8 shadow-[8px_8px_0px_0px_rgba(139,94,60,0.5)] max-w-4xl w-full flex flex-col gap-6 relative overflow-hidden">
                <div className="absolute top-0 left-0 w-full h-6 bg-yellow-100 border-b-2 border-[#8b5e3c]"></div>
                
                <h2 className="text-6xl font-heading font-bold text-center text-[#d35400] mb-2 mt-4">YOUR TURN!</h2>
                
                {/* TIMER SECTION */}
                <div className="flex items-center justify-center gap-6 bg-[#fff3e0] p-4 rounded-xl border-2 border-[#8b5e3c] w-fit mx-auto -mt-4 shadow-sm relative z-10">
                
                <div className="w-[60px] h-[80px]">
                    <DoodleHourglass timeLeft={time} totalTime={initialMinutes * 60} isActive={isActive} />
                </div>

                <div className="flex flex-col items-center justify-center">
                    <span className="text-4xl font-bold font-mono text-[#5e3c23] min-w-[120px] text-center mb-2">{formatTime(time)}</span>
                    <div className="flex gap-2 items-center">
                    <button onClick={toggleTimer} className="p-2 hover:bg-[#e6c9a8] rounded-full text-[#5e3c23] border border-[#5e3c23] bg-white">
                        {isActive ? <Pause size={24} fill="currentColor"/> : <Play size={24} fill="currentColor"/>}
                    </button>
                    <button onClick={resetTimer} className="p-2 hover:bg-[#e6c9a8] rounded-full text-[#5e3c23] border border-[#5e3c23] bg-white">
                        <RotateCcw size={24} />
                    </button>
                    
                    {!isActive && (
                         <div className="flex items-center gap-1 ml-2 bg-white px-2 py-1 rounded border border-[#8b5e3c]">
                            <Clock size={16} className="text-[#5e3c23]" />
                            <input 
                                type="number" 
                                min="1" 
                                value={initialMinutes} 
                                onChange={handleInputChange}
                                className="w-12 text-center font-bold text-[#5e3c23] outline-none bg-transparent"
                            />
                            <span className="text-xs font-bold text-[#5e3c23]">min</span>
                         </div>
                    )}
                    </div>
                </div>
                </div>

                <div className="grid grid-cols-2 gap-8 text-2xl font-hand">
                <div className="bg-[#E1F5FE] p-6 rounded-xl border-2 border-dashed border-[#0288D1] relative">
                    <div className="absolute -top-3 -left-3 text-4xl transform -rotate-12">‚úèÔ∏è</div>
                    <h3 className="font-heading font-bold mb-2 text-[#0277BD] text-3xl">1. Draw</h3>
                    <p>Draw your own bedroom (or a dream room).</p>
                    <p className="mt-2 text-lg text-gray-600 italic">("Zeichne dein Zimmer.")</p>
                </div>
                <div className="bg-[#E8F5E9] p-6 rounded-xl border-2 border-dashed border-[#2E7D32] relative">
                    <div className="absolute -top-3 -right-3 text-4xl transform rotate-12">üè∑Ô∏è</div>
                    <h3 className="font-heading font-bold mb-2 text-[#2E7D32] text-3xl">2. Label</h3>
                    <p>Write the words next to the things.</p>
                    <p className="mt-2 text-lg text-gray-600 italic">("Beschrifte die M√∂bel: bed, desk...")</p>
                </div>
                </div>
            </div>
            </div>
        );
        };

        // --- MAIN APP COMPONENT ---
        const App = () => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const [foundItems, setFoundItems] = useState([]); // Lifted state for persistence
            const totalSlides = 6;

            const nextSlide = () => setCurrentSlide(prev => Math.min(prev + 1, totalSlides - 1));
            const prevSlide = () => setCurrentSlide(prev => Math.max(prev - 1, 0));

            return (
                <div className="flex flex-col h-screen text-[#4a4036] selection:bg-[#ffcc80] font-heading bg-[#fff3e0]">
                
                <div className="w-full bg-[#ffcc80] p-3 border-b-4 border-[#e65100] flex justify-between items-center shadow-lg z-50">
                    <h1 className="text-3xl font-heading font-bold tracking-wide flex items-center gap-3 text-[#5e3c23]">
                    <div className="bg-white p-2 rounded-full border-2 border-[#e65100]">
                        <Home size={28} color="#e65100" />
                    </div>
                    <span className="text-[#e65100] drop-shadow-sm">Unit 2: Homes & Families</span>
                    </h1>
                    <div className="flex gap-3 items-center">
                    <span className="text-xl font-bold text-[#5e3c23] mr-2 font-hand">Slide {currentSlide + 1}/{totalSlides}</span>
                    <button onClick={prevSlide} disabled={currentSlide === 0} className="p-2 bg-white border-2 border-[#e65100] rounded-full hover:bg-[#fff3e0] disabled:opacity-50 shadow-[2px_2px_0px_0px_rgba(230,81,0,1)] active:translate-y-1 active:shadow-none transition-all"><ArrowLeft size={28} color="#e65100"/></button>
                    <button onClick={nextSlide} disabled={currentSlide === totalSlides - 1} className="p-2 bg-white border-2 border-[#e65100] rounded-full hover:bg-[#fff3e0] disabled:opacity-50 shadow-[2px_2px_0px_0px_rgba(230,81,0,1)] active:translate-y-1 active:shadow-none transition-all"><ArrowRight size={28} color="#e65100"/></button>
                    </div>
                </div>
                <div className="flex-1 overflow-hidden relative flex items-center justify-center p-4 bg-amber-50">
                    <div className="absolute inset-0 opacity-10 pointer-events-none" style={{backgroundImage: 'radial-gradient(#e65100 2px, transparent 2px)', backgroundSize: '30px 30px'}}></div>
                    <div className="w-full max-w-6xl h-full flex flex-col justify-center relative z-10">
                    {currentSlide === 0 && <SlideIntro />}
                    {currentSlide === 1 && <SlideBrainstorm />}
                    {currentSlide === 2 && <SlideHouseModel />}
                    {currentSlide === 3 && <SlideInfo />}
                    {currentSlide === 4 && <SlideFurnitureQuiz foundItems={foundItems} setFoundItems={setFoundItems} />}
                    {currentSlide === 5 && <SlideTask />}
                    </div>
                </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
